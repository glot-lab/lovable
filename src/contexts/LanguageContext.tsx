import React, { createContext, useContext, useState, ReactNode } from 'react';

export type InterfaceLanguage = 'fr' | 'en';

interface LanguageContextType {
  language: InterfaceLanguage;
  setLanguage: (lang: InterfaceLanguage) => void;
  t: (key: string) => string;
}

const translations = {
  fr: {
    // Navigation
    'nav.joinEvent': 'Rejoindre un √©v√©nement',
    'nav.organizer': 'Espace Organisateur',
    
    // Home page
    'home.tagline': 'Acc√©dez √† vos √©v√®nements, conf√©rences et r√©unions dans la langue de votre choix.',
    'home.subtitle': 'Connectez, traduisez et communiquez sans effort entre les langues, en temps r√©el.',
    'home.speakers.title': 'Pour les Orateurs',
    'home.speakers.description': 'Interface intuitive pour g√©rer vos √©v√©nements et surveiller la qualit√© de traduction en temps r√©el.',
    'home.listeners.title': 'Pour les Auditeurs',
    'home.listeners.description': 'Acc√®s simple via QR code ou code √©v√©nement. √âcoutez dans la langue de votre choix avec une latence minimale.',
    'home.privacyPolicy': 'Politique de confidentialit√©',
    'home.termsOfService': 'Conditions d\'utilisation',
    
    // Listener page
    'listener.joinEvent': 'Rejoindre un √©v√©nement',
    'listener.eventCode': 'Code √©v√©nement',
    'listener.eventCodePlaceholder': 'Entrez le code de l\'√©v√©nement',
    'listener.selectLanguage': 'S√©lectionnez votre langue',
    'listener.connect': 'Se connecter',
    'listener.scanQR': 'Scanner le QR code',
    'listener.deviceInfo': 'Compatible avec tous les appareils modernes',
    'listener.live': 'EN DIRECT',
    'listener.disconnect': 'D√©connexion',
    'listener.audioPlayer': 'Lecteur Audio',
    'listener.volume': 'Volume',
    'listener.latency': 'Latence',
    'listener.listeners': 'Auditeurs',
    'listener.quality': 'Qualit√©',
    'listener.switchLanguage': 'Changer de langue',
    'listener.ms': 'ms',
    'listener.excellent': 'Excellente',
    'listener.realTimeTranslation': 'Traduction en temps r√©el',
    'listener.connection': 'Connexion',
    'listener.providedByOrganizer': 'Code fourni par l\'organisateur',
    'listener.enterCode': 'Ex: TECH2024-FR',
    'listener.translationLanguage': 'Langue de Traduction',
    'listener.scanQRCode': 'Scanner QR Code',
    'listener.scanQRDescription': 'Scannez le QR code affich√© par l\'organisateur',
    'listener.deviceCompatibility': 'Compatible smartphone, tablette et ordinateur',
    'listener.encryption': 'üîí Chiffrement bout en bout ‚Ä¢ üì± Compatible tous appareils',
    
    // Organizer page
    'organizer.title': 'Espace Organisateur',
    'organizer.subtitle': 'G√©rez vos √©v√©nements de traduction simultan√©e',
    'organizer.supabaseRequired': 'Activation Supabase Requise',
    'organizer.supabaseDescription': 'Pour utiliser les fonctionnalit√©s compl√®tes (authentification, gestion d\'√©v√©nements, base de donn√©es), activez l\'int√©gration Supabase en cliquant sur le bouton vert en haut √† droite.',
    'organizer.tabs.events': '√âv√©nements',
    'organizer.tabs.glossaries': 'Glossaires',
    'organizer.tabs.monitoring': 'Monitoring',
    'organizer.tabs.settings': 'Param√®tres',
    'organizer.myEvents': 'Mes √âv√©nements',
    'organizer.createEvent': 'Cr√©er un √âv√©nement',
    'organizer.active': 'Actif',
    'organizer.scheduled': 'Programm√©',
    'organizer.languages': 'Langues',
    'organizer.listeners': 'Auditeurs',
    'organizer.participants': 'Participants',
    'organizer.latency': 'Latence',
    'organizer.qrCode': 'QR Code',
    'organizer.glossary': 'Glossaire',
    'organizer.actions': 'Actions',
    'organizer.connected': 'connect√©s',
    'organizer.expected': 'attendus',
    'organizer.averageLatency': 'moyenne',
    'organizer.specializedGlossaries': 'Glossaires Sp√©cialis√©s',
    'organizer.createGlossary': 'Cr√©er un Glossaire',
    'organizer.terms': 'termes',
    'organizer.lastUpdate': 'Derni√®re mise √† jour',
    'organizer.realTimeMonitoring': 'Monitoring Temps R√©el',
    'organizer.averageLatencyTitle': 'Latence Moyenne',
    'organizer.audioStability': 'Stabilit√© Audio',
    'organizer.activeListeners': 'Auditeurs Actifs',
    'organizer.onEvents': 'Sur 3 √©v√©nements',
    'organizer.audioConfiguration': 'Configuration Audio',
    'organizer.audioSettings': 'Param√®tres de capture et traitement audio',
    'organizer.audioQuality': 'Qualit√© Audio',
    'organizer.audioQualityValue': '48kHz / 16-bit (Recommand√©)',
    'organizer.noiseReduction': 'R√©duction de Bruit',
    'organizer.noiseReductionValue': 'Activ√©e (IA Adaptive)',
    'organizer.security': 'S√©curit√©',
    'organizer.securitySettings': 'Chiffrement et gestion des acc√®s',
    'organizer.encryption': 'Chiffrement',
    'organizer.encryptionValue': 'AES-256 bout en bout',
    'organizer.listenerAccess': 'Acc√®s Auditeurs',
    'organizer.listenerAccessValue': 'Code QR s√©curis√©',
    
    // Organizer workflow
    'organizer.workflow.create': 'Cr√©er',
    
    // Speaker/Broadcaster interface
    'speaker.title': 'Interface Orateur',
    'speaker.subtitle': 'Diffusion et contr√¥le de la traduction en temps r√©el',
    'speaker.loginEvent': 'Se connecter √† l\'√©v√©nement',
    'speaker.eventKey': 'Cl√© de diffusion',
    'speaker.eventKeyPlaceholder': 'Entrez la cl√© de diffusion de l\'√©v√©nement',
    'speaker.audioSetup': 'Configuration Audio',
    'speaker.selectDevice': 'S√©lectionner le p√©riph√©rique d\'entr√©e',
    'speaker.volumeMeter': 'Niveau sonore',
    'speaker.testAudio': 'Tester',
    'speaker.sourceLanguage': 'Langue source',
    'speaker.confirmLanguage': 'Confirmer la langue',
    'speaker.broadcast': 'Diffusion',
    'speaker.startBroadcast': 'D√©marrer la diffusion',
    'speaker.stopBroadcast': 'Arr√™ter la diffusion',
    'speaker.broadcasting': 'Diffusion en cours...',
    'speaker.monitoring': 'Monitoring en temps r√©el',
    'speaker.latency': 'Latence',
    'speaker.pipelineHealth': '√âtat du pipeline',
    'speaker.connectedParticipants': 'Participants connect√©s',
    'speaker.healthy': 'Sain',
    'speaker.degraded': 'D√©grad√©',
    'speaker.offline': 'Hors ligne',
    'speaker.testParticipantView': 'Tester la vue participant',
    'speaker.openParticipantView': 'Ouvrir vue participant',
    'speaker.security': 'S√©curit√©',
    'speaker.broadcastKey': 'Cl√© de diffusion requise',
    'speaker.goLive': 'Passer en direct',
    'speaker.unauthorized': 'Non autoris√©',
    'speaker.devicePermissions': 'Permissions micro requises',
    'organizer.workflow.share': 'Partager',
    'organizer.workflow.monitor': 'Surveiller',
    'organizer.workflow.eventTitle': 'Titre de l\'√©v√©nement',
    'organizer.workflow.eventTitlePlaceholder': 'Ex: Conf√©rence Tech 2024',
    'organizer.workflow.eventDate': 'Date et heure (optionnel)',
    'organizer.workflow.sourceLanguage': 'Langue source',
    'organizer.workflow.targetLanguages': 'Langues de traduction',
    'organizer.workflow.eventType': 'Type d\'√©v√©nement',
    'organizer.workflow.eventTypePublic': 'Public',
    'organizer.workflow.eventTypePrivate': 'Prot√©g√© par mot de passe',
    'organizer.workflow.createEventButton': 'Cr√©er l\'√©v√©nement',
    'organizer.workflow.accessGenerated': 'Acc√®s g√©n√©r√©',
    'organizer.workflow.qrCodeTitle': 'QR Code',
    'organizer.workflow.shareableLink': 'Lien de partage',
    'organizer.workflow.copyLink': 'Copier le lien',
    'organizer.workflow.downloadQR': 'T√©l√©charger QR',
    'organizer.workflow.eventCode': 'Code √©v√©nement',
    'organizer.workflow.connectedParticipants': 'Participants connect√©s',
    'organizer.workflow.languageBreakdown': 'R√©partition par langue',
    'organizer.workflow.backToCreate': 'Cr√©er un nouvel √©v√©nement',
    'organizer.workflow.eventSettings': 'Param√®tres de l\'√©v√©nement',
    
    // Landing page
    'landing.welcome': 'Bienvenue !',
    'landing.bluetoothInstruction': 'Assurez-vous de connecter votre appareil Bluetooth (oreillettes ou casque).',
    'landing.quickStart': 'Prise en main rapide :',
    'landing.step1': '1. Connectez votre appareil audio Bluetooth √† votre t√©l√©phone.',
    'landing.step2': '2. V√©rifiez que le son est bien activ√©.',
    'landing.step3': '3. Cliquez sur Rejoindre l\'√©v√®nement pour d√©marrer la traduction en direct.',
    'landing.readyMessage': 'üëâ Vous √™tes pr√™t √† vivre l\'exp√©rience Glot en toute simplicit√© !',
    'landing.joinEvent': 'Rejoindre l\'√©v√®nement',
    'landing.learnMore': 'En savoir plus',
    'landing.privacyPolicy': 'Politique de confidentialit√©',
    'landing.termsOfService': 'Conditions d\'utilisation',
    
    // Common
    'common.language': 'Langue',
    'common.loading': 'Chargement...',
    'common.error': 'Erreur',
    'common.success': 'Succ√®s',
    'common.back': 'Retour',
    'common.connected': 'Connect√©',
    'common.configure': 'Configurer',
    'common.show': 'Afficher',
    'common.testing': 'Test en cours',
    'common.stable': 'Tr√®s stable'
  },
  en: {
    // Navigation
    'nav.joinEvent': 'Join Event',
    'nav.organizer': 'Organizer Space',
    
    // Home page
    'home.tagline': 'Access your events, conferences and meetings in the language of your choice.',
    'home.subtitle': 'Connect, translate, and communicate seamlessly across languages in real-time.',
    'home.speakers.title': 'For Speakers',
    'home.speakers.description': 'Intuitive interface to manage your events and monitor translation quality in real time.',
    'home.listeners.title': 'For Listeners',
    'home.listeners.description': 'Simple access via QR code or event code. Listen in the language of your choice with minimal latency.',
    'home.privacyPolicy': 'Privacy Policy',
    'home.termsOfService': 'Terms of Service',
    
    // Listener page
    'listener.joinEvent': 'Join Event',
    'listener.eventCode': 'Event Code',
    'listener.eventCodePlaceholder': 'Enter event code',
    'listener.selectLanguage': 'Select your language',
    'listener.connect': 'Connect',
    'listener.scanQR': 'Scan QR Code',
    'listener.deviceInfo': 'Compatible with all modern devices',
    'listener.live': 'LIVE',
    'listener.disconnect': 'Disconnect',
    'listener.audioPlayer': 'Audio Player',
    'listener.volume': 'Volume',
    'listener.latency': 'Latency',
    'listener.listeners': 'Listeners',
    'listener.quality': 'Quality',
    'listener.switchLanguage': 'Switch Language',
    'listener.ms': 'ms',
    'listener.excellent': 'Excellent',
    'listener.realTimeTranslation': 'Real-time translation',
    'listener.connection': 'Connection',
    'listener.providedByOrganizer': 'Code provided by organizer',
    'listener.enterCode': 'Ex: TECH2024-EN',
    'listener.translationLanguage': 'Translation Language',
    'listener.scanQRCode': 'Scan QR Code',
    'listener.scanQRDescription': 'Scan the QR code displayed by the organizer',
    'listener.deviceCompatibility': 'Compatible with smartphone, tablet and computer',
    'listener.encryption': 'üîí End-to-end encryption ‚Ä¢ üì± Compatible with all devices',
    
    // Landing page
    'landing.welcome': 'Welcome!',
    'landing.bluetoothInstruction': 'Make sure to connect your Bluetooth device (earphones or headset).',
    'landing.quickStart': 'Quick start:',
    'landing.step1': '1. Connect your Bluetooth audio device to your phone.',
    'landing.step2': '2. Check that the sound is enabled.',
    'landing.step3': '3. Click Join Event to start live translation.',
    'landing.readyMessage': 'üëâ You\'re ready to experience Glot with ease!',
    'landing.joinEvent': 'Join Event',
    'landing.learnMore': 'Learn More',
    'landing.privacyPolicy': 'Privacy Policy',
    'landing.termsOfService': 'Terms of Service',
    
    // Organizer page
    'organizer.title': 'Organizer Space',
    'organizer.subtitle': 'Manage your simultaneous translation events',
    'organizer.supabaseRequired': 'Supabase Activation Required',
    'organizer.supabaseDescription': 'To use full features (authentication, event management, database), activate Supabase integration by clicking the green button in the top right.',
    'organizer.tabs.events': 'Events',
    'organizer.tabs.glossaries': 'Glossaries',
    'organizer.tabs.monitoring': 'Monitoring',
    'organizer.tabs.settings': 'Settings',
    'organizer.myEvents': 'My Events',
    'organizer.createEvent': 'Create Event',
    'organizer.active': 'Active',
    'organizer.scheduled': 'Scheduled',
    'organizer.languages': 'Languages',
    'organizer.listeners': 'Listeners',
    'organizer.participants': 'Participants',
    'organizer.latency': 'Latency',
    'organizer.qrCode': 'QR Code',
    'organizer.glossary': 'Glossary',
    'organizer.actions': 'Actions',
    'organizer.connected': 'connected',
    'organizer.expected': 'expected',
    'organizer.averageLatency': 'average',
    'organizer.specializedGlossaries': 'Specialized Glossaries',
    'organizer.createGlossary': 'Create Glossary',
    'organizer.terms': 'terms',
    'organizer.lastUpdate': 'Last update',
    'organizer.realTimeMonitoring': 'Real-Time Monitoring',
    'organizer.averageLatencyTitle': 'Average Latency',
    'organizer.audioStability': 'Audio Stability',
    'organizer.activeListeners': 'Active Listeners',
    'organizer.onEvents': 'On 3 events',
    'organizer.audioConfiguration': 'Audio Configuration',
    'organizer.audioSettings': 'Audio capture and processing settings',
    'organizer.audioQuality': 'Audio Quality',
    'organizer.audioQualityValue': '48kHz / 16-bit (Recommended)',
    'organizer.noiseReduction': 'Noise Reduction',
    'organizer.noiseReductionValue': 'Enabled (AI Adaptive)',
    'organizer.security': 'Security',
    'organizer.securitySettings': 'Encryption and access management',
    'organizer.encryption': 'Encryption',
    'organizer.encryptionValue': 'AES-256 end-to-end',
    'organizer.listenerAccess': 'Listener Access',
    'organizer.listenerAccessValue': 'Secure QR code',
    
    // Organizer workflow
    'organizer.workflow.create': 'Create',
    'organizer.workflow.share': 'Share',
    'organizer.workflow.monitor': 'Monitor',
    
    // Speaker/Broadcaster interface
    'speaker.title': 'Speaker Interface',
    'speaker.goLive': 'Go Live as Speaker',
    'speaker.subtitle': 'Real-time broadcast and translation control',
    'speaker.loginEvent': 'Connect to Event',
    'speaker.eventKey': 'Broadcast Key',
    'speaker.eventKeyPlaceholder': 'Enter event broadcast key',
    'speaker.audioSetup': 'Audio Setup',
    'speaker.selectDevice': 'Select input device',
    'speaker.volumeMeter': 'Volume level',
    'speaker.testAudio': 'Test',
    'speaker.sourceLanguage': 'Source language',
    'speaker.confirmLanguage': 'Confirm language',
    'speaker.broadcast': 'Broadcast',
    'speaker.startBroadcast': 'Start Broadcast',
    'speaker.stopBroadcast': 'Stop Broadcast',
    'speaker.broadcasting': 'Broadcasting...',
    'speaker.monitoring': 'Real-time Monitoring',
    'speaker.latency': 'Latency',
    'speaker.pipelineHealth': 'Pipeline Status',
    'speaker.connectedParticipants': 'Connected Participants',
    'speaker.healthy': 'Healthy',
    'speaker.degraded': 'Degraded',
    'speaker.offline': 'Offline',
    'speaker.testParticipantView': 'Test participant view',
    'speaker.openParticipantView': 'Open participant view',
    'speaker.security': 'Security',
    'speaker.broadcastKey': 'Broadcast key required',
    'speaker.unauthorized': 'Unauthorized',
    'speaker.devicePermissions': 'Microphone permissions required',
    'organizer.workflow.eventTitle': 'Event title',
    'organizer.workflow.eventTitlePlaceholder': 'Ex: Tech Conference 2024',
    'organizer.workflow.eventDate': 'Date and time (optional)',
    'organizer.workflow.sourceLanguage': 'Source language',
    'organizer.workflow.targetLanguages': 'Translation languages',
    'organizer.workflow.eventType': 'Event type',
    'organizer.workflow.eventTypePublic': 'Public',
    'organizer.workflow.eventTypePrivate': 'Password protected',
    'organizer.workflow.createEventButton': 'Create event',
    'organizer.workflow.accessGenerated': 'Access generated',
    'organizer.workflow.qrCodeTitle': 'QR Code',
    'organizer.workflow.shareableLink': 'Shareable link',
    'organizer.workflow.copyLink': 'Copy link',
    'organizer.workflow.downloadQR': 'Download QR',
    'organizer.workflow.eventCode': 'Event code',
    'organizer.workflow.connectedParticipants': 'Connected participants',
    'organizer.workflow.languageBreakdown': 'Language breakdown',
    'organizer.workflow.backToCreate': 'Create new event',
    'organizer.workflow.eventSettings': 'Event settings',
    
    // Common
    'common.language': 'Language',
    'common.loading': 'Loading...',
    'common.error': 'Error',
    'common.success': 'Success',
    'common.back': 'Back',
    'common.connected': 'Connected',
    'common.configure': 'Configure',
    'common.show': 'Show',
    'common.excellent': 'Excellent',
    'common.stable': 'Very stable',
    'common.testing': 'Testing'
  }
};

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export const LanguageProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [language, setLanguage] = useState<InterfaceLanguage>('fr');

  const t = (key: string): string => {
    return translations[language][key as keyof typeof translations['fr']] || key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useLanguage = (): LanguageContextType => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
};